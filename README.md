# Todo Api with TDD Golang

Repository pattern is used to create mongodb documents. 
There are 2 modes on main.go file like `main` and `test` when `go test`is called on terminal the test server is running on port 8081 and server
creates a test mongodb database to test integration tests and CDC tests. If it's on the test mode it deletes mongodb database on every run.
When `./todo-api` runs the real server starts.


## Tests
Mocking files generated by `mockgen` `https://github.com/golang/mock`

`controller_test.go` and `service_test.go` file tests control functions to create, update, get and delete.

Pact provider tests for CDC tests on `pact_test.go` file.

To run all tests `go test`

## CICD Pipeline

This repo published on CircleCI to create a pipeline. It builds well but when it comes to tests it throws an error because "pact-provider-verifier" 
is not on the $PATH. I couldn't handle this problem that's why CICD for backend is not working for now.

![Image for CICD](https://github.com/gokhantos/todo-api/blob/main/cicd-api.png)
